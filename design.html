<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>La ObsidianÃ© | Design Studio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Poppins',sans-serif;background:#e9e7e3;margin-top:70px}

/* NAVBAR */
.navbar{
  position:fixed;top:0;left:0;width:100%;height:70px;
  background:rgba(75,0,7);color:#d0b75b;
  display:flex;align-items:center;padding:0 60px;z-index:1000;
  font-family:'Cormorant Garamond',serif;
}
.logo-group{display:flex;gap:10px}
.crown-img{height:48px}
.label-img{height:30px}

.menu{list-style:none;display:flex;gap:22px;margin-left:auto}
.menu a{color:#d0b75b;font-size:16px;text-decoration:none}
.menu a:hover{opacity:.7}

.user-icon{width:22px;height:22px;stroke:#d0b75b;stroke-width:1.4;fill:none}

/* APP */
.app{display:flex;height:calc(100vh - 70px)}

/* SIDEBAR */
.sidebar{
  width:64px;background:#f5f4f2;padding-top:20px;position:relative;
}
.side-btn{
  width:100%;padding:18px;border:none;background:none;
  cursor:pointer;color:rgba(75,0,7);position:relative;
}
.side-btn i{font-size:18px}
.side-btn:hover{background:#e4dede}

.side-btn::after{
  content:attr(data-tooltip);
  position:absolute;left:70px;top:50%;
  transform:translateY(-50%);
  background:#111;color:#fff;font-size:12px;
  padding:6px 10px;border-radius:6px;
  opacity:0;white-space:nowrap;pointer-events:none;
}
.side-btn:hover::after{opacity:1}

.sidebar-bottom{
  position:absolute;bottom:10px;width:100%;
}
.sidebar-bottom .fa-bookmark{color:#6b0008;transition:.3s}
.sidebar-bottom button:hover .fa-bookmark{color:#c0a062}
.sidebar-bottom .saved .fa-bookmark{color:#c0a062}

/* TOOL PANEL */
.tool-panel{
  width:0;
  height: calc(100vh - 70px); /* navbar height */
  background:#f5f4f2;
overflow-x: hidden;   /* keep width animation clean */
overflow-y: visible; /* allow child scrollbar */
  transition:.35s;
  border-right:1px solid rgba(0,0,0,.08);

  /* âœ… CRITICAL */
  display: flex;
  flex-direction: column;
}

.tool-panel.active{width:260px}

.tool-panel-header{
  padding:18px;font-size:14px;font-weight:500;
  border-bottom:1px solid rgba(0,0,0,.1);
  display:flex;align-items:center;gap:12px;
}
.panel-back{background:none;border:none;cursor:pointer;color:rgba(75,0,7)}
.panel-back:hover{opacity:.7}

.tool-panel-content{
  padding:16px;display:grid;gap:14px;
  max-height:calc(100vh - 140px);overflow-y:auto;
}
.tool-panel-content img{width:100%;border-radius:10px;cursor:pointer}

/* MAIN */
.main{flex:1;padding:24px;display:flex;justify-content:center;align-items:center}
.canvas{
  width:100%;max-width:1100px;height:100%;
  background:#f5f4f2;border-radius:20px;
  position:relative;display:flex;justify-content:center;align-items:center
}
.empty-state{
  text-align:center;border:2px dashed #aaa;
  padding:60px;border-radius:18px
}
.empty-state button{
  margin-top:18px;padding:12px 26px;border:none;
  border-radius:8px;background:#6b1c1c;color:#fff;cursor:pointer
}
#room{
  position:absolute;inset:0;width:100%;height:100%;
  object-fit:cover;border-radius:20px
}
.category-item{
  padding:12px;border-radius:8px;background:#e9e7e3;
  cursor:pointer;font-size:14px
}
.category-item:hover{background:#ddd}
.furniture-thumb{width:100%;border-radius:10px}

.furniture-card{
  background:#f5f4f2;
  border-radius:14px;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
  cursor:pointer;
  transition:.25s ease;
}

.furniture-card:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 25px rgba(0,0,0,.08);
}

.furniture-card img{
  width:100%;
  border-radius:12px;
}

.furniture-name{
  font-family:'Cormorant Garamond',serif;
  font-size:14px;
  color:#4b0007;
  letter-spacing:.3px;
}

#room{
  pointer-events:none;
    z-index:1;

}


img {
  -webkit-user-drag: none;
  -khtml-user-drag: none;
  -moz-user-drag: none;
  -o-user-drag: none;
  user-drag: none;

}
.canvas {
  user-select: none;
}
.canvas-item{
  height:auto;
  max-width:none;  
  transition: width .05s linear;
}

.canvas-item.selected{
  outline:2px solid #c0a062;
  outline-offset:4px;
}
.resize-handle{
  width:12px;
  height:12px;
  background:#c0a062;
  border-radius:50%;
  position:absolute;
  right:-6px;
  bottom:-6px;
  cursor:nwse-resize;
}
.rotate-btn{
  position:absolute;
  top:-12px;
  left:-12px;
  width:26px;
  height:26px;
  border-radius:50%;
  background:#c0a062;
  color:#4b0007;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  z-index:30;
  font-size:13px;
}

.rotate-btn:hover{
  background:#d6bb6e;
}


.canvas-wrapper{
  position:absolute;
  z-index:10;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:2px;
  box-sizing:content-box;
}

.canvas-wrapper.selected{
  outline:2px solid #c0a062;
}

.delete-btn{
  position:absolute;
  top:-11px;
  right:-11px;
  width:22px;
  height:22px;
  border-radius:50%;
  background:#6b0008;
  color:#fff;
  font-size:16px;
  display:none;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  z-index:20;
}

.canvas-wrapper.selected .delete-btn{
  display:flex;
}



.canvas-wrapper img{
  display:block;              /* removes inline gap */
  max-width:100%;
  height:auto;
    position:relative;
  z-index:1;
}






</style>
</head>

<body>

<nav class="navbar">
  <div class="logo-group">
    <img class="crown-img" src="crown.png">
    <img class="label-img" src="label.png">
  </div>
  <ul class="menu">
    <li><a href="home.html"><i class="fa-solid fa-arrow-left"></i></a></li>
    <li><a href="#" onclick="undo()"><i class="fa-solid fa-rotate-left"></i></a></li>
    <li><a href="#" onclick="deleteSelected()"><i class="fa-regular fa-trash-can"></i></a></li>
    <li><a href="#" onclick="resetCanvas()"><i class="fa-solid fa-arrow-rotate-right"></i></a></li>
    <li><a href="#" onclick="shareDesign()"><i class="fa-solid fa-share-nodes"></i></a></li>
    <li>
      <a href="dashboard.html">
        <svg class="user-icon" viewBox="0 0 24 24">
          <circle cx="12" cy="8" r="4"></circle>
          <path d="M4 20c0-4 4-6 8-6s8 2 8 6"></path>
        </svg>
      </a>
    </li>
  </ul>
</nav>

<div class="app">

<div class="sidebar">
  <button class="side-btn" data-tooltip="Upload Image" onclick="uploadRoom()">
    <i class="fa-solid fa-upload"></i>
  </button>

  <button class="side-btn" data-tooltip="Templates" onclick="openPanel('Templates')">
    <i class="fa-regular fa-image"></i>
  </button>

  <button class="side-btn" data-tooltip="Furniture" onclick="openFurnitureCategories()">
    <i class="fa-solid fa-couch"></i>
  </button>

  <button class="side-btn" data-tooltip="Decor" onclick="openDecorCategories()">
    <i class="fa-solid fa-leaf"></i>
  </button>

  <button class="side-btn" data-tooltip="Wall Color" onclick="openPanel('wall')">
    <i class="fa-solid fa-paint-roller"></i>
  </button>

  <div class="sidebar-bottom">
    <button class="side-btn" data-tooltip="Save Design" onclick="saveDesign(this)">
      <i class="fa-regular fa-bookmark"></i>
    </button>
    <button class="side-btn" data-tooltip="Favourite">
      <i class="fa-regular fa-heart"></i>
    </button>
  </div>
</div>

<div class="tool-panel" id="toolPanel">
  <div class="tool-panel-header">
    <button class="panel-back" onclick="panelBack()">
      <i class="fa-solid fa-arrow-left"></i>
    </button>
    <span id="panelTitle"></span>
  </div>
  <div class="tool-panel-content" id="panelContent"></div>
</div>

<div class="main">
  <div class="canvas" id="canvas">
    <div class="empty-state">
      <h3>Upload your room image</h3>
      <p>Start designing with luxury precision</p>
      <button onclick="uploadRoom()">Upload Image</button>
    </div>
  </div>
</div>

</div>


<script>
  let selectedWrapper = null;
let selectedItem = null; // image
let offsetX = 0;
let offsetY = 0;

const furnitureLibrary = {
  sofa:[
    {id:"sofa1", name:"Obsidian Crest Sofa", src:"sofa1.png"},
    {id:"sofa2", name:"Aurum Royale Sofa", src:"sofa2.png"},
    {id:"sofa3", name:"Noir Empress Sofa", src:"sofa3.png"},
    {id:"sofa6", name:"Velour Monarch Sofa", src:"sofa6.png"},
    {id:"sofa5", name:"Imperial Curve Sofa", src:"sofa5.png"},
    {id:"sofa4", name:"Ã‰bÃ¨ne Luxe Sofa", src:"sofa4.png"},
    {id:"sofa7", name:"Gilded Obsidian Sofa", src:"sofa7.png"},
    {id:"sofa8", name:"Midnight Throne Sofa", src:"sofa8.png"},
    {id:"sofa9", name:"Velvet Dominion Sofa", src:"sofa9.png"},
    {id:"sofa10", name:"Crownstone Signature Sofa", src:"sofa10.png"}
  ],


  armchair:[
  {id:"chair1", name:"Obsidian Throne Chair", src:"chair1.png"},
  {id:"chair2", name:"Aurum Accent Chair", src:"chair2.png"},
  {id:"chair3", name:"Velour Empress Chair", src:"chair3.png"},
  {id:"chair4", name:"Noir Sculpt Chair", src:"chair4.png"},
  {id:"chair5", name:"Gilded Halo Armchair", src:"chair5.png"},
  {id:"chair6", name:"Midnight Crown Chair", src:"chair6.png"},
  {id:"chair7", name:"Ã‰bÃ¨ne Royale Chair", src:"chair7.png"},
  {id:"chair8", name:"Imperial Curve Armchair", src:"chair8.png"}
],

  table1:[
 {id:"console1", name:"Aurum Obsidian Console", src:"con1.png"},
  {id:"console2", name:"Noir Royale Console", src:"con2.png"},
  {id:"console3", name:"Gilded Crest Console", src:"con3.png"},
  {id:"console4", name:"Ã‰bÃ¨ne Sculpt Console", src:"con4.png"},
  {id:"console5", name:"Imperial Vein Console", src:"con5.png"}
],
  table2:[
{id:"dining1", name:"Aurum Monarch Dining Table", src:"d1.png"},
  {id:"dining2", name:"Noir Empress Dining Table", src:"d2.png"},
  {id:"dining3", name:"Ã‰bÃ¨ne Royale Dining Table", src:"d3.png"},
  {id:"dining4", name:"Gilded Vein Dining Table", src:"d4.png"},
  {id:"dining5", name:"Imperial Obsidian Dining Table", src:"d5.png"} 
 ],

  bed:[
{id:"bed1", name:"Obsidian Crown Bed", src:"bed1.png"},
  {id:"bed2", name:"Aurum Royale Bed", src:"bed2.png"},
  {id:"bed3", name:"Velour Empress Bed", src:"bed3.png"},
  {id:"bed4", name:"Noir Canopy Bed", src:"bed4.png"},
  {id:"bed5", name:"Ã‰bÃ¨ne Sovereign Bed", src:"bed5.png"} 
 ],

 sideboard:[
  {id:"sideboard1", name:"Aurum Crest Sideboard", src:"sd1.png"},
  {id:"sideboard2", name:"Noir Obsidian Sideboard", src:"sd2.png"},
  {id:"sideboard3", name:"Ã‰bÃ¨ne Royale Sideboard", src:"sd3.png"},
  {id:"sideboard4", name:"Gilded Monarch Sideboard", src:"sd4.png"},
  {id:"sideboard5", name:"Imperial Vein Sideboard", src:"sd5.png"}
]
};

const decorLibrary = {
  plants: [
    { id: "plant1", src: "p1.png" },
    { id: "plant2", src: "p2.png" },
    { id: "plant3", src: "p3.png" },
    { id: "plant4", src: "p4.png" },
    { id: "plant5", src: "p5.png" },
    { id: "plant6", src: "p6.png" },
    { id: "plant7", src: "p7.png" },
    { id: "plant8", src: "p8.png" }
  ],
  lamps: [
    { id: "lamp1", src: "lamp1.png" },
    { id: "lamp2", src: "lamp2.png" },
    { id: "lamp3", src: "lamp3.png" },
    { id: "lamp4", src: "lamp4.png" },
    { id: "lamp5", src: "lamp5.png" },
    { id: "lamp6", src: "lamp6.png" }
  ],
  tablelamps: [
    { id: "tablelamp1", src: "tblam1.png" },
    { id: "tablelamp2", src: "tblam2.png" },
    { id: "tablelamp3", src: "tblam3.png" },
    { id: "tablelamp4", src: "tblam4.png" },
    { id: "tablelamp5", src: "tblam5.png" },
    { id: "tablelamp6", src: "tblam6.png" },
    { id: "tablelamp7", src: "tblam7.png" },
  ],
  chandeliers: [
    { id: "chandelier1", src: "chan1.png" },
    { id: "chandelier2", src: "chan2.png" },
    { id: "chandelier3", src: "chan3.png" },
    { id: "chandelier4", src: "chan4.png" },
    { id: "chandelier5", src: "chan5.png" },
    { id: "chandelier6", src: "chan6.png" },
    { id: "chandelier7", src: "chan7.png" }
  ],
  wallart: [
    { id: "art1", src: "w1.png" },
    { id: "art2", src: "w2.png" },
    { id: "art3", src: "w3.png" },
    { id: "art4", src: "w4.png" },
    { id: "art5", src: "w5.png" },
    { id: "art6", src: "w6.png" },
    { id: "art7", src: "w7.png" }
  ],
  rugs: [
    { id: "rug1", src: "r1.png" },
    { id: "rug2", src: "r2.png" },
    { id: "rug3", src: "r3.png" },
    { id: "rug4", src: "r4.png" },
    { id: "rug5", src: "r5.png" },
    { id: "rug6", src: "r6.png" },
    { id: "rug7", src: "r7.png" },
    { id: "rug8", src: "r8.png" }
  ]
};


const canvas=document.getElementById("canvas");
const panel=document.getElementById("toolPanel");
const panelTitle=document.getElementById("panelTitle");
const panelContent=document.getElementById("panelContent");





function addFurniture(src){

  const empty = canvas.querySelector(".empty-state");
  if (empty) empty.remove();

  // WRAPPER
  const wrapper = document.createElement("div");
  wrapper.className = "canvas-wrapper";
  wrapper.style.left = "440px";
  wrapper.style.top = "220px";

  // IMAGE BOX (THIS CLIPS THE COLOR)
  const imageBox = document.createElement("div");
  imageBox.className = "image-box";

  // IMAGE
  const img = document.createElement("img");
  img.src = src;
  img.className = "canvas-item";
  img.style.width = "220px";
  img.style.cursor = "move";

  // COLOR OVERLAY (ONLY IMAGE SIZE)
  const overlay = document.createElement("div");
  overlay.className = "color-overlay";

  // DELETE BUTTON
  const del = document.createElement("div");
  del.className = "delete-btn";
  del.innerHTML = "&times;";
  del.onclick = (e)=>{
    e.stopPropagation();
    wrapper.remove();
    selectedWrapper = null;
    selectedItem = null;
    hideColorPalette();
  };

  // BUILD STRUCTURE
  imageBox.appendChild(img);
  imageBox.appendChild(overlay);
  wrapper.appendChild(imageBox);
  wrapper.appendChild(del);
  canvas.appendChild(wrapper);

  selectItem(wrapper);

  // DRAG
  img.addEventListener("mousedown", e=>{
    e.stopPropagation();
    selectItem(wrapper);

    const rect = canvas.getBoundingClientRect();
    offsetX = e.clientX - rect.left - wrapper.offsetLeft;
    offsetY = e.clientY - rect.top  - wrapper.offsetTop;

    document.addEventListener("mousemove", dragItem);
    document.addEventListener("mouseup", stopDrag);
  });
}







function dragItem(e){
  if(!selectedWrapper) return;

  const rect = canvas.getBoundingClientRect();

  selectedWrapper.style.left =
    `${e.clientX - rect.left - offsetX}px`;

  selectedWrapper.style.top =
    `${e.clientY - rect.top - offsetY}px`;
}




function stopDrag(){
  document.removeEventListener("mousemove", dragItem);
  document.removeEventListener("mouseup", stopDrag);
}






function selectItem(wrapper){
  document.querySelectorAll(".canvas-wrapper").forEach(w=>{
    w.classList.remove("selected");
    w.querySelectorAll(".resize-handle, .rotate-btn").forEach(el=>el.remove());
  });

  selectedWrapper = wrapper;
  selectedItem = wrapper.querySelector("img");

  wrapper.classList.add("selected");

  /* Resize handle */
  const resize = document.createElement("div");
  resize.className = "resize-handle";
  resize.addEventListener("mousedown", startResize);
  wrapper.appendChild(resize);

  /* Rotate button (undo icon) */
  const rotate = document.createElement("div");
  rotate.className = "rotate-btn";
  rotate.innerHTML = `<i class="fa-solid fa-rotate-right"></i>`;
  rotate.addEventListener("mousedown", startRotate);
  wrapper.appendChild(rotate);

}






let startX, startWidth;

function startResize(e){
  e.stopPropagation();
  startX = e.clientX;
  startWidth = selectedItem.getBoundingClientRect().width;

  document.addEventListener("mousemove", resizeItem);
  document.addEventListener("mouseup", stopResize);
}
function resizeItem(e){
  if(!selectedItem) return;

  const dx = e.clientX - startX;
  let newWidth = startWidth + dx;

  // ðŸ”’ limits (tweak freely)
  const MIN = 80;
  const MAX = 900;

  newWidth = Math.max(MIN, Math.min(MAX, newWidth));

  selectedItem.style.width = newWidth + "px";
}
function stopResize(){
  document.removeEventListener("mousemove", resizeItem);
  document.removeEventListener("mouseup", stopResize);
}






let startAngle = 0;
let centerX, centerY;

function startRotate(e){
  e.stopPropagation();

  const rect = selectedItem.getBoundingClientRect();
  centerX = rect.left + rect.width / 2;
  centerY = rect.top + rect.height / 2;

  startAngle = Math.atan2(
    e.clientY - centerY,
    e.clientX - centerX
  );

  document.addEventListener("mousemove", rotateItem);
  document.addEventListener("mouseup", stopRotate);
}

function rotateItem(e){
  if(!selectedItem) return;

  const angle = Math.atan2(
    e.clientY - centerY,
    e.clientX - centerX
  );

  const deg = (angle - startAngle) * (180 / Math.PI);
  const current = selectedItem.dataset.rotate
    ? parseFloat(selectedItem.dataset.rotate)
    : 0;

  const total = current + deg;
  selectedItem.style.transform = `rotate(${total}deg)`;
  selectedItem.dataset.rotate = total;

  startAngle = angle;
}

function stopRotate(){
  document.removeEventListener("mousemove", rotateItem);
  document.removeEventListener("mouseup", stopRotate);
}





function deleteSelected(){
  if(selectedWrapper){
    selectedWrapper.remove();
    selectedWrapper = null;
    selectedItem = null;
  }
}


canvas.addEventListener("mousedown", e => {
  if(e.target === canvas){
    clearSelection();
  }
});



function clearSelection(){
  document.querySelectorAll(".canvas-wrapper").forEach(w=>{
    w.classList.remove("selected");

    w.querySelectorAll(".resize-handle, .rotate-btn").forEach(el=>{
      el.remove();
    });
  });

  selectedWrapper = null;
  selectedItem = null;
}





let panelState="root"; 
// root | templates | decor | wall | furniture-categories | furniture-items

function uploadRoom(){
  canvas.innerHTML="";
  const i=document.createElement("input");
  i.type="file";i.accept="image/*";
  i.onchange=e=>{
    const img=document.createElement("img");
    img.id="room";img.src=URL.createObjectURL(e.target.files[0]);
    canvas.appendChild(img);
  };
  i.click();
}

function loadSample(src){
  canvas.innerHTML="";
  const img=document.createElement("img");
  img.id="room";img.src=src;
  canvas.appendChild(img);
}

function openPanel(type){
  panel.classList.add("active");
  panelContent.innerHTML="";
  panelTitle.innerText=type;

  if(type==="Templates"){
    panelState="templates";
    panelContent.innerHTML=`
      <img src="e7.jpg" onclick="loadSample(this.src)">
      <img src="e9.jpg" onclick="loadSample(this.src)">
      <img src="e6.jpg" onclick="loadSample(this.src)">
            <img src="e4.jpg" onclick="loadSample(this.src)">
      <img src="e3.jpg" onclick="loadSample(this.src)">
      <img src="e5.jpg" onclick="loadSample(this.src)">
      <img src="e2.jpg" onclick="loadSample(this.src)">
      <img src="e1.jpg" onclick="loadSample(this.src)">

    `;
  }

  if(type==="decor"){
    panelState="decor";
    panelContent.innerHTML=`<p>Decor items here</p>`;
  }

  if(type==="wall"){
    panelState="wall";
    panelContent.innerHTML=`<p>Wall colors here</p>`;
  }
}

function openFurnitureCategories(){
  panel.classList.add("active");
  panelState="furniture-categories";
  panelTitle.innerText="Furniture";
  panelContent.innerHTML=`
    <div class="category-item" onclick="openFurnitureCategory('sofa')">Sofa</div>
    <div class="category-item" onclick="openFurnitureCategory('armchair')">Arm Chair</div>
    <div class="category-item" onclick="openFurnitureCategory('table1')">Consoles Table</div>
    <div class="category-item" onclick="openFurnitureCategory('table2')">Dinning Table</div>
    <div class="category-item" onclick="openFurnitureCategory('bed')">Bed</div>
    <div class="category-item" onclick="openFurnitureCategory('sideboard')">Sidebaord</div>
  `;
}

function openDecorCategories(){
  panel.classList.add("active");
  panelState = "decor-categories";
  panelTitle.innerText = "Decor";

  panelContent.innerHTML = `
    <div class="category-item" onclick="openDecorCategory('plants')">Plants</div>
    <div class="category-item" onclick="openDecorCategory('lamps')">Wall-Lamps</div>
    <div class="category-item" onclick="openDecorCategory('tablelamps')">Table-Lamps</div>
    <div class="category-item" onclick="openDecorCategory('chandeliers')">Chandeliers</div>
    <div class="category-item" onclick="openDecorCategory('wallart')">Wall Art</div>
    <div class="category-item" onclick="openDecorCategory('rugs')">Rugs</div>
  `;
}


function openFurnitureCategory(type){
 panelContent.innerHTML = furnitureLibrary[type]
  .map(i => `
    <div class="furniture-card" onclick="addFurniture('${i.src}')">
      <img src="${i.src}">
      <div class="furniture-name">${i.name}</div>
    </div>
  `).join("");

}

function openDecorCategory(type){
  panelState = "decor-items";
  panelTitle.innerText = type.toUpperCase();

  panelContent.innerHTML = decorLibrary[type]
    .map(i => `<img src="${i.src}" class="furniture-thumb">`)
    .join("");
}


function panelBack(){
  if(panelState==="furniture-items"){
    openFurnitureCategories();
    return;
  }
  if(panelState === "decor-items"){
  openDecorCategories();
  return;
}

  if(
    panelState==="furniture-categories" ||
    panelState==="templates" ||
    panelState==="decor-categories" ||
    panelState==="wall"
  ){
    panel.classList.remove("active");
    panelContent.innerHTML="";
    panelTitle.innerText="";
    panelState="root";
  }
}

function saveDesign(btn){btn.classList.toggle("saved")}
function undo(){}
function resetCanvas(){
  canvas.innerHTML=`<div class="empty-state"><h3>Upload your room image</h3><p>Start designing with luxury precision</p><button onclick="uploadRoom()">Upload Image</button></div>`;
}
function shareDesign(){navigator.clipboard.writeText(location.href)}
["dragstart","drag","dragend","dragover","drop"].forEach(evt=>{
  document.addEventListener(evt, e => e.preventDefault());
});







</script>

</body>
</html>
