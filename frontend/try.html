<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>La Obsidian√© | Design Studio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
/* RESET */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
body{
  font-family:'Poppins',sans-serif;
  background:#fff;
  color:#f5f5f5;
  overflow:hidden;
}

/* NAVBAR */
.navbar{
  height:60px;
  background:rgba(75,0,7);
  border-bottom:1px solid rgba(255,215,160,0.15);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 24px;
  font-family:'Cormorant Garamond',serif;
  letter-spacing:1px;
  font-size:20px;
}

/* RIGHT ACTION GROUP */
.nav-right{
  display:flex;
  align-items:center;
  gap:12px;
}

/* RENDER BUTTON (PRIMARY) */
.render-nav-btn{
  background:rgba(75,0,7);
  border:1px solid rgba(255,215,160,0.45);
  color:#d4af37;
  padding:8px 16px;
  border-radius:10px;
  cursor:pointer;
  font-size:13px;
  transition:0.3s;
}

.render-nav-btn:hover{
  background:#d4af37;
  color:#000;
}

/* ICON BUTTONS */
.nav-icon{
  background:transparent;
  border:1px solid rgba(255,215,160,0.25);
  width:36px;
  height:36px;
  border-radius:8px;
  color:#d4af37;
  cursor:pointer;
  transition:0.3s;
}

.nav-icon:hover{
  background:#d4af37;
  color:#000;
}

/* DANGER ACTION (DELETE) */
.nav-icon.danger{
  color:#d4af37;
  border-color:rgba(178,58,58,0.5);
}

.nav-icon.danger:hover{
  background:#b23a3a;
  color:#fff;
}


/* APP LAYOUT */
.app{
  display:grid;
  grid-template-columns:50px 1fr;
  height:calc(100vh - 60px);
}

/* SIDEBAR */
.sidebar{
  background:rgba(75, 0, 7);
  border-right:1px solid rgba(255,215,160,0.12);
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-top:20px;
  gap:26px;
  width: 50px;
}

.sidebar i{
  font-size:20px;
  color:#d4af37;
  cursor:pointer;
  transition:0.3s;
}

.sidebar i:hover{
  color:#f5f4f2
}

/* CANVAS */
.canvas-area{
  position:relative;
  background:#f5f4f2;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:15px;
  border-radius:22px;
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.04);
  height:95%;
}





/* FLOATING ACTION BAR */
.action-bar{
  position:absolute;
  bottom:24px;
  right:24px;
  background:#111;
  border:1px solid rgba(255,215,160,0.2);
  border-radius:12px;
  padding:8px;
  display:flex;
  flex-direction:column;
  gap:6px;
}

.action-bar button{
  background:#0e0e0e;
  border:1px solid rgba(255,215,160,0.25);
  color:#f5f5f5;
  padding:10px 16px;
  border-radius:8px;
  cursor:pointer;
  font-size:13px;
  transition:0.3s;
}

.action-bar button:hover{
  background:#d4af37;
  color:#000;
}

.logo-group{display:flex;gap:10px}
.crown-img{height:48px}
.label-img{
height:30px;
margin-top: 10px;
}




/* PROJECT TITLE (CENTER) */
.project-title-wrapper{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
}

.project-title-input{
  background:transparent;
  border:none;
  outline:none;
  text-align:center;
  font-family:'Cormorant Garamond',serif;
  font-size:15px;
  letter-spacing:1px;
  color:#f5f5f5;
  padding:4px 10px;
  border-radius:6px;
  transition:0.3s;
  min-width:220px;
}

/* Hover & Focus */
.project-title-input:hover{
  background:rgba(255,255,255,0.06);
}

.project-title-input:focus{
  background:rgba(255,255,255,0.1);
  box-shadow:0 0 0 1px rgba(255,215,160,0.4);
}





.sidebar i.active{
  color:#d4af37;
}

#three-container{
  position:absolute;
  inset:0;
  border-radius:22px;
  overflow:hidden;
    height:100%;
    pointer-events:auto;
    z-index:5; 
}
/* UPLOAD STATE */
.upload-box{
  position:absolute;
  z-index:20;
  border:2px dashed #bdbdbd;
  padding:46px 60px;
  text-align:center;
  cursor:pointer;
  background:#f8f7f5;
  border-radius:18px;
}


.upload-box h2{
  font-family:'Cormorant Garamond',serif;
  margin-bottom:6px;
  font-weight:600;
  color:#000;
}

.upload-box p{
  font-size:14px;
  color:#555;
  margin-bottom:14px;
}

.upload-label{
  display:inline-block;
  background:#5b0f14;
  color:#fff;
  padding:10px 18px;
  border-radius:8px;
  cursor:pointer;
  font-size:13px;
}



</style>
</head>

<body>

<div class="navbar">

  <!-- LEFT: LOGO -->
  <a href="home.html" style="text-decoration:none;">
    <div class="logo-group">
      <img class="crown-img" src="crown.png">
      <img class="label-img" src="label.png">
    </div>
  </a>

  <!-- CENTER: PROJECT TITLE -->
  <div class="project-title-wrapper">
    <input 
      type="text" 
      class="project-title-input" 
      value="Untitled Design"
      spellcheck="false"
    />
  </div>

  <!-- RIGHT: ACTIONS -->
  <div class="nav-right">
    <a href="preview.html"><button class="render-nav-btn">Preview</button></a>

    <button class="nav-icon" title="Undo">
      <i class="fa-solid fa-rotate-left"></i>
    </button>

    <button class="nav-icon danger" title="Delete">
      <i class="fa-solid fa-trash"></i>
    </button>

    <button class="nav-icon" title="Download">
      <i class="fa-solid fa-arrow-down"></i>
    </button>

    <button class="nav-icon" title="Share">
      <i class="fa-solid fa-share-nodes"></i>
    </button>
  </div>

</div>




<div class="app">
  <!-- SIDEBAR -->
  <div class="sidebar">
    <i class="fa-solid fa-couch"></i>
    <i class="fa-solid fa-chair"></i>
    <i class="fa-solid fa-bed"></i>
    <i class="fa-solid fa-rug"></i>
    <i class="fa-solid fa-palette"></i>
    <i class="fa-solid fa-lightbulb"></i>
    <i class="fa-solid fa-wand-magic-sparkles"></i>
  </div>

  <!-- CANVAS -->
  <div class="canvas-area">
  <div id="three-container"></div>

  <div class="upload-box" id="uploadBox">
  <h2>Upload your room image</h2>
  <p>Start designing with luxury precision</p>

  <label for="fileInput" class="upload-label">
    Upload Image
  </label>

  <input type="file" id="fileInput" accept="image/*" hidden>
</div>

</div>
</div>





    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>

<script>
let scene, camera, renderer, controls;

const fileInput = document.getElementById("fileInput");
const uploadBox = document.getElementById("uploadBox");

init3D();
animate();

uploadBox.addEventListener("click", () => {
  fileInput.click();
});





/* ---------- 3D SETUP ---------- */
function init3D(){
  const container = document.getElementById("three-container");

  scene = new THREE.Scene();
scene.background = null;

  camera = new THREE.PerspectiveCamera(
    45,
    container.clientWidth / container.clientHeight,
    0.1,
    1000
  );
camera.position.set(0, 1.6, 1.5); // human eye height
renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(container.clientWidth, container.clientHeight);
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setClearColor(0xefede9, 1);
renderer.outputColorSpace = THREE.SRGBColorSpace;
renderer.toneMapping = THREE.NoToneMapping;

if (container.children.length === 0) {
container.innerHTML = "";
container.appendChild(renderer.domElement);
}

  controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.enablePan = false;
controls.enableZoom = true;
controls.rotateSpeed = 0.4;
controls.minDistance = 0.8;
controls.maxDistance = 6;
controls.maxPolarAngle = Math.PI / 2; // cannot flip upside down
controls.target.set(0, 1.8, -2.2);
controls.update();


  const ambient = new THREE.AmbientLight(0xffffff, 0.8);
  scene.add(ambient);

  const directional = new THREE.DirectionalLight(0xffffff, 0.6);
  directional.position.set(5,10,7);
  scene.add(directional);

  const floorGeo = new THREE.PlaneGeometry(10,10);
  const floorMat = new THREE.MeshStandardMaterial({
    color:0xdcd8d2,
    roughness:0.8
  });

  const floor = new THREE.Mesh(floorGeo, floorMat);
  floor.rotation.x = -Math.PI / 2;
  scene.add(floor);

  window.addEventListener("resize", onResize);
}

function onResize(){
  const container = document.getElementById("three-container");
  camera.aspect = container.clientWidth / container.clientHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(container.clientWidth, container.clientHeight);
}

function animate(){
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
}

/* ---------- IMAGE UPLOAD ---------- */

fileInput.onchange = (e) => {
  const file = e.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = () => {
    applyRoomImage(reader.result);

    uploadBox.style.opacity = "0";
    uploadBox.style.pointerEvents = "none";
  };
  reader.readAsDataURL(file);
};





let roomGroup;

function applyRoomImage(imageSrc) {

  if (roomGroup) scene.remove(roomGroup);

  roomGroup = new THREE.Group();

  const img = new Image();
  img.onload = () => {

    const texture = new THREE.Texture(img);
    texture.colorSpace = THREE.SRGBColorSpace;
    texture.needsUpdate = true;

    const wallMaterial = new THREE.MeshStandardMaterial({
      map: texture,
      roughness: 0.35,
      metalness: 0,
      side: THREE.FrontSide
    });

    const backWall = new THREE.Mesh(
      new THREE.PlaneGeometry(6, 3.5),
      wallMaterial
    );

    backWall.position.set(0, 1.8, -2.2);
    roomGroup.add(backWall);

    scene.add(roomGroup);

    // Focus camera on image
    controls.target.set(0, 1.8, -2.2);
    controls.update();
  };

  img.src = imageSrc;
}


</script>
</body>
</html>
