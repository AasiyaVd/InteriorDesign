// ==========================
// DATASOURCE & CLIENT
// ==========================
datasource db {
  provider = "sqlite"
  url      = "file:../designs.db"
}


generator client {
  provider = "prisma-client-js"
}

// ==========================
// USER (AUTH + OWNERSHIP)
// ==========================
model User {
  id        Int      @id @default(autoincrement())
  firstName String
  lastName  String
  contact   String
  email     String   @unique
  password  String
  createdAt DateTime @default(now())

  designs   Design[]
  requests  DesignRequest[]
  aiDesigns AIDesign[]
}

// ==========================
// CORE DESIGN (EDITOR / DASHBOARD)
// ==========================
model Design {
  id          Int      @id @default(autoincrement())
  userId      Int
  title       String
  imagePath   String
  designState Json
  createdAt   DateTime @default(now())

  user     User            @relation(fields: [userId], references: [id])
  requests DesignRequest[] // âœ… FIX (opposite relation)
}

// ==========================
// MAKE-IT-REAL REQUEST
// ==========================
model DesignRequest {
  id Int @id @default(autoincrement())

  userId   Int
  designId Int

  city        String
  budgetRange String
  spaceType   String
  timeline    String

  designerName String
  designerLink String?

  status    String   @default("shared")
  createdAt DateTime @default(now())

  user   User   @relation(fields: [userId], references: [id])
  design Design @relation(fields: [designId], references: [id])
}

// =========================
// Ai GENERATED DESIGNS
// =========================
model AIDesign {
  id          Int      @id @default(autoincrement())
  userId      Int
  style       String
  roomType    String
  colorMood   String?
  lighting    String?
  beforeImage String
  afterImage  String?
  createdAt   DateTime @default(now())

  user User @relation(fields: [userId], references: [id])
}

// ==========================
// NEWSLETTER (OPTIONAL)
// ==========================
model NewsletterSubscriber {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  createdAt DateTime @default(now())
}

// ==========================
// CONTACT FORM (OPTIONAL)
// ==========================
model ContactMessage {
  id         Int      @id @default(autoincrement())
  category   String
  occupation String
  firstName  String
  lastName   String
  email      String
  company    String?
  phone      String?
  referral   String
  country    String
  message    String?
  createdAt  DateTime @default(now())
}
