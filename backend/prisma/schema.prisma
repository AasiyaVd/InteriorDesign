datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        Int      @id @default(autoincrement())
  firstName String
  lastName  String
  contact   String
  email     String   @unique
  password  String
  createdAt DateTime @default(now())

  needs UserNeeds?
  leads DesignLead[] // ðŸ‘ˆ THIS LINE FIXES THE ERROR
}

model NewsletterSubscriber {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  createdAt DateTime @default(now())
}

model ContactMessage {
  id         Int      @id @default(autoincrement())
  category   String
  occupation String
  firstName  String
  lastName   String
  email      String
  company    String?
  phone      String?
  referral   String
  country    String
  message    String?
  createdAt  DateTime @default(now())
}

model Design {
  id        Int      @id @default(autoincrement())
  title     String
  imagePath String
  createdAt DateTime @default(now())
}

model UserNeeds {
  id Int @id @default(autoincrement())

  userId Int  @unique
  user   User @relation(fields: [userId], references: [id])

  city        String
  budgetRange String
  spaceType   String
  timeline    String

  createdAt DateTime @default(now())
}

model Designer {
  id     Int    @id @default(autoincrement())
  name   String
  email  String
  styles String
  city   String

  leads DesignLead[]
}

model DesignLead {
  id Int @id @default(autoincrement())

  userId     Int
  designerId Int

  user     User     @relation(fields: [userId], references: [id])
  designer Designer @relation(fields: [designerId], references: [id])

  city        String
  budgetRange String
  spaceType   String
  timeline    String

  designImageUrl String
  style          String?

  status    String   @default("shared")
  createdAt DateTime @default(now())
}
